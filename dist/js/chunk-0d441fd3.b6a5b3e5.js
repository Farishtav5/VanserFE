(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d441fd3"],{"498a":function(t,e,a){"use strict";var s=a("23e7"),n=a("58a8").trim,i=a("c8d2");s({target:"String",proto:!0,forced:i("trim")},{trim:function(){return n(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var s=a("1d80"),n=a("5899"),i="["+n+"]",o=RegExp("^"+i+i+"*"),l=RegExp(i+i+"*$"),r=function(t){return function(e){var a=String(s(e));return 1&t&&(a=a.replace(o,"")),2&t&&(a=a.replace(l,"")),a}};t.exports={start:r(1),end:r(2),trim:r(3)}},"79a5":function(t,e,a){"use strict";a("ee43")},"7c86":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",{staticClass:"my-3",attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"auto"}},[a("h2",{staticClass:" font-weight-bold"},[t._v("HR Coils")])]),a("v-col",{staticClass:"text-right",attrs:{cols:"auto"}},[a("v-btn",{staticClass:" mr-1 body-2 font-weight-bold",attrs:{dark:""},on:{click:t.openForm}},[t._v("Add Coil")])],1),a("v-col",{staticClass:"pb-0",attrs:{cols:"12"}},[a("v-row",{attrs:{justify:"end"}},[t.selMultiRows.length>0?a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{staticClass:"pt-4 pb-4 font-weight-bold",attrs:{dark:!t.preventSlitting,disabled:t.preventSlitting},on:{click:t.openSlitForm}},[t._v("Create Slits")])],1):t._e(),a("v-col",{attrs:{cols:"auto"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[a("v-text-field",t._g(t._b({staticClass:"body-1",attrs:{dense:"",outlined:"",color:"grey",placeholder:"Select Date",readonly:"",clearable:""},on:{"click:clear":function(e){return t.clearSearch("date")}},model:{value:t.addedFrom,callback:function(e){t.addedFrom=e},expression:"addedFrom"}},"v-text-field",n,!1),s))]}}]),model:{value:t.addedFromMenu,callback:function(e){t.addedFromMenu=e},expression:"addedFromMenu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:"",max:t.maxDate},on:{input:function(e){t.addedFromMenu=!1},change:t.setOptions},model:{value:t.addedFrom,callback:function(e){t.addedFrom=e},expression:"addedFrom"}})],1)],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"auto"}},[a("v-text-field",{staticClass:"body-1 select-box",attrs:{type:"number",outlined:"",color:"grey",placeholder:"Select Thickness",dense:"",clearable:""},on:{change:t.setOptions,"click:clear":function(e){return t.clearSearch("thickness")}},model:{value:t.selThickness,callback:function(e){t.selThickness=t._n(e)},expression:"selThickness"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"auto"}},[a("v-select",{staticClass:"select-box",attrs:{outlined:"",dense:"",items:t.$store.state.shifts,label:"Select Slit Shift","item-text":"name","item-value":"id",color:"grey",clearable:""},on:{input:t.setOptions,"click:clear":function(e){return t.clearSearch("shift")}},model:{value:t.selShift,callback:function(e){t.selShift=t._n(e)},expression:"selShift"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"auto"}},[a("v-select",{staticClass:"select-box",attrs:{outlined:"",dense:"",items:t.statusList,label:"Select Coil Status","item-text":"name","item-value":"name",color:"grey",clearable:""},on:{input:t.setOptions,"click:clear":function(e){return t.clearSearch("status")}},model:{value:t.selStatus,callback:function(e){t.selStatus=e},expression:"selStatus"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"auto"}},[a("v-select",{staticClass:"select-box",attrs:{outlined:"",dense:"",items:t.$store.state.companies,label:"Select Company","item-text":"name","item-value":"id",color:"grey",clearable:""},on:{input:t.setOptions,"click:clear":function(e){return t.clearSearch("company")}},model:{value:t.selCompany,callback:function(e){t.selCompany=t._n(e)},expression:"selCompany"}})],1)],1)],1),t.preventSlitting?a("v-col",{staticClass:"red--text caption py-0",attrs:{color:"red",cols:"12"}},[t._v("You can create slits for available coils only.")]):t._e()],1),a("v-data-table",{staticClass:"elevation-1 coils",attrs:{headers:t.headers,items:t.coilRows,"items-per-page":10,loading:t.$store.state.isLoading,"footer-props":{"items-per-page-options":[5,10,25,50,100]},"fixed-header":"",height:"calc(100vh - 300px)",options:t.options,"server-items-length":t.$store.state.totalRows,"single-select":t.singleSelect,"show-select":""},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.company",fn:function(e){var s=e.item;return[a("div",{staticClass:"body-2"},[a("span",[t._v(t._s(t.showCompany(s.company)))])])]}},{key:"item.date",fn:function(e){var s=e.item;return[a("div",{staticClass:"body-2"},[a("span",[t._v(t._s(s.date?t.$options.filters.formatDate(s.date):"---"))])])]}},{key:"item.status",fn:function(e){var s=e.item;return[a("div",{staticClass:"body-2"},[a("span",{staticClass:"text-capitalize",class:t.getTextColor(s.status)},[t._v(t._s(s.status))])])]}},{key:"item.actions",fn:function(e){var s=e.item;return[a("v-menu",{scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",n,!1),s),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[a("v-list",{attrs:{dense:""}},t._l(s.actions,(function(e){return a("v-list-item",{key:e.text,on:{click:function(a){return t.actions(e.text,s)}}},[a("v-list-item-icon",{staticClass:"mr-0"},[a("v-icon",{staticClass:"mt-1",attrs:{small:""},domProps:{textContent:t._s(e.icon)}})],1),a("v-list-item-title",{staticClass:"body-2 text-capitalize mt-1"},[t._v(" "+t._s(e.text)+" ")])],1)})),1)],1)]}}],null,!0),model:{value:t.selMultiRows,callback:function(e){t.selMultiRows=e},expression:"selMultiRows"}}),t.$store.state.coilDrawer?a("AddCoil"):t._e(),t.$store.state.slitDrawer?a("SlitCoil"):t._e()],1)},n=[],i=(a("4de4"),a("7db0"),a("c740"),a("b0c0"),a("96cf"),a("1da1")),o=a("df4b"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.$store.state.coilDrawer?a("v-navigation-drawer",{staticStyle:{position:"fixed",top:"0",right:"0","overflow-y":"scroll","z-index":"101"},attrs:{temporary:"",right:"",width:"360"},model:{value:t.$store.state.coilDrawer,callback:function(e){t.$set(t.$store.state,"coilDrawer",e)},expression:"$store.state.coilDrawer"}},[a("div",{staticClass:"subtitle-1 font-weight-bold px-4 py-2"},[a("span",[t._v(t._s(t.$store.state.coilId?"Edit Coil":"Add Coil"))]),a("v-icon",{staticClass:"float-right",on:{click:t.close}},[t._v(" mdi-close-circle ")])],1),a("v-divider"),a("v-container",[a("v-row",{staticClass:"px-4 mt-4"},[a("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[a("v-combobox",{attrs:{items:t.$store.state.companies,"item-text":"name",label:"Company",outlined:"",color:"grey",dense:"","return-object":!1},on:{change:t.changeCompany},model:{value:t.selCompany,callback:function(e){t.selCompany="string"===typeof e?e.trim():e},expression:"selCompany"}})],1),a("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[a("v-text-field",t._g(t._b({staticClass:"body-1",attrs:{dense:"",outlined:"",color:"grey",placeholder:"Select Date",readonly:"",clearable:""},on:{"click:clear":function(e){return t.clearSearch("date")}},model:{value:t.selDate,callback:function(e){t.selDate=e},expression:"selDate"}},"v-text-field",n,!1),s))]}}],null,!1,887548643),model:{value:t.dateMenu,callback:function(e){t.dateMenu=e},expression:"dateMenu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:"",max:t.maxDate},on:{input:function(e){t.dateMenu=!1},change:t.searchData},model:{value:t.selDate,callback:function(e){t.selDate=e},expression:"selDate"}})],1)],1),a("v-col",{staticClass:"py-0 my-0",attrs:{cols:"12"}},[a("v-select",{attrs:{outlined:"",dense:"",items:t.$store.state.shifts,label:"Select Shift","item-text":"name","item-value":"id",color:"grey"},model:{value:t.data.shift,callback:function(e){t.$set(t.data,"shift",e)},expression:"data.shift"}})],1),a("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[a("v-text-field",{attrs:{outlined:"",label:"Parent Coil ID",color:"grey",dense:""},model:{value:t.data.brand_no,callback:function(e){t.$set(t.data,"brand_no",e)},expression:"data.brand_no"}})],1),a("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Thickness (mm)",outlined:"",dense:"",color:"grey",type:"number"},model:{value:t.data.thickness,callback:function(e){t.$set(t.data,"thickness",t._n(e))},expression:"data.thickness"}})],1),a("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Width (mm)",outlined:"",dense:"",color:"grey",type:"number"},model:{value:t.data.width,callback:function(e){t.$set(t.data,"width",t._n(e))},expression:"data.width"}})],1),a("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Actual Weight (kg)",outlined:"",dense:"",color:"grey",type:"number"},model:{value:t.data.weight,callback:function(e){t.$set(t.data,"weight",t._n(e))},expression:"data.weight"}})],1),a("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Formulated Weight (kg)",outlined:"",dense:"",color:"grey",type:"number"},model:{value:t.data.formulated_weight,callback:function(e){t.$set(t.data,"formulated_weight",t._n(e))},expression:"data.formulated_weight"}})],1)],1)],1),a("v-divider"),a("div",{staticClass:"mx-4 mt-8 float-right"},[a("v-btn",{staticClass:"mr-2",attrs:{outlined:""},on:{click:t.close}},[t._v(" Cancel ")]),a("v-btn",{attrs:{dark:t.validateForm,disabled:!t.validateForm},on:{click:t.addCoil}},[t._v(" Save ")])],1)],1):t._e()},r=[],c=(a("ac1f"),a("1276"),a("498a"),a("d6e8")),d={name:"AddCoil",data:function(){return{selCompany:"",drawer:null,data:{},maxDate:(new Date).toISOString(),dateMenu:!1,selDate:null}},computed:{validateForm:function(){return!!(this.selCompany&&this.selDate&&this.data.brand_no&&this.data.thickness&&this.data.width&&this.data.weight&&this.data.formulated_weight&&this.data.shift)}},mounted:function(){if(this.$store.state.coilId){var t=this.$store.state.coilData,e=this.$options.filters.calendarDate(t.date).split(" "),a=this.$store.state.companies.find((function(e){return e.id==t.company}));this.selCompany=a.name;var s=t.brand_no,n=t.thickness,i=t.width,o=t.weight,l=t.formulated_weight,r=t.shift;this.selDate=e[0],this.data={brand_no:s,thickness:n,width:i,weight:o,formulated_weight:l,shift:r}}else this.data={}},methods:{changeCompany:function(t){var e=this.$store.state.companies.findIndex((function(e){return e.name.trim().toLowerCase()==t.trim().toLowerCase()}));e<0&&t.trim().length>0&&this.addCompany(t.trim())},clearSearch:function(t){console.log("data",t)},searchData:function(){},addCompany:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c["a"].add({name:t});case 3:s=a.sent,console.log("result",s),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.log("error",a.t0);case 10:return a.prev=10,e.$store.dispatch("getCompanies"),a.finish(10);case 13:case"end":return a.stop()}}),a,null,[[0,7,10,13]])})))()},addCoil:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.selCompany&&(a=t.$store.state.companies.find((function(e){return e.name.trim()==t.selCompany.trim()})),t.data.company=a.id),!t.$store.state.coilId){e.next=5;break}t.editCoil(),e.next=21;break;case 5:return t.data.date="".concat(t.selDate),t.data.created_at=t.$options.filters.calendarDate((new Date).toISOString()),e.prev=7,e.next=10,o["a"].add(t.data);case 10:s=e.sent,console.log("result",s),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](7),console.log("error",e.t0);case 17:return e.prev=17,t.$store.state.coilDrawer=!1,t.$store.dispatch("getCoils",{page:1,limit:10}),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[7,14,17,21]])})))()},editCoil:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.data.status="available",t.data.date="".concat(t.selDate),t.data.updated_at=t.$options.filters.calendarDate((new Date).toISOString()),console.log("data",t.data),e.prev=4,e.next=7,o["a"].update(t.$store.state.coilId,t.data);case 7:a=e.sent,console.log("result",a),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),console.log("error",e.t0);case 14:return e.prev=14,t.$store.state.coilDrawer=!1,t.$store.dispatch("getCoils",{page:1,limit:10}),e.finish(14);case 18:case"end":return e.stop()}}),e,null,[[4,11,14,18]])})))()},close:function(){this.$store.state.coilDrawer=!1}}},u=d,h=a("2877"),p=Object(h["a"])(u,l,r,!1,null,null,null),m=p.exports,f=a("f0d8"),v={components:{AddCoil:m,SlitCoil:f["a"]},data:function(){return{selShift:"",selThickness:"",selMultiRows:[],singleSelect:!1,actionsList:[{icon:"mdi-plus-circle",text:"create slit"},{icon:"mdi-pencil",text:"edit"},{icon:"mdi-delete",text:"delete"},{icon:"mdi-view-grid",text:"preview planning"}],options:{},sortBy:"",orderBy:"desc",selCompany:null,selStatus:null,addedFromMenu:!1,addedFrom:null,maxDate:(new Date).toISOString(),headline:"",statusList:[{id:1,name:"Available"},{id:2,name:"In-Queue"},{id:3,name:"Slitted"}],headers:[{text:"ID",align:"start",value:"id"},{text:"Company",value:"company",sortable:!1},{text:"Parent Coil ID",value:"brand_no",sortable:!1},{text:"Date of Receiving",value:"date"},{text:"Status",value:"status",sortable:!1},{text:"Thickness (mm)",value:"thickness"},{text:"Weight (kg)",value:"weight"},{text:"Width (mm)",value:"width"},{text:"Actions",value:"actions",sortable:!1}]}},mounted:function(){this.$store.dispatch("getCompanies"),this.$store.dispatch("getShifts")},watch:{options:{handler:function(t){var e=t.sortBy,a=t.sortDesc;1===e.length&&1===a.length&&(1==a[0]?this.orderBy="desc":this.orderBy="asc",this.sortBy=e[0]),this.searchData()},deep:!0}},computed:{preventSlitting:function(){var t=this.selMultiRows.findIndex((function(t){return"available"!=t.status.toLowerCase()}));return t>=0},coilRows:function(){return this.$store.state.coils.filter((function(t){var e=[];return e="available"===t.status?[{icon:"mdi-plus-circle",text:"create slit"},{icon:"mdi-pencil",text:"edit"},{icon:"mdi-delete",text:"delete"}]:"slitted"===t.status?[{icon:"mdi-view-grid",text:"preview planning"}]:[{icon:"mdi-view-grid",text:"preview planning"},{icon:"mdi-pencil",text:"edit planning"}],t.actions=e}))}},methods:{showCompany:function(t){return this.$store.state.companies.length>0?this.$store.state.companies.find((function(e){return e.id==t})).name:""},actions:function(t,e){"delete"===t&&this.deleteCoil(e.id),"edit"===t?(this.$store.state.coilId=e.id,this.$store.state.coilData=e,this.$store.state.coilDrawer=!0):(this.$store.state.coilId=null,this.$store.state.coilData={}),"create slit"===t&&(this.$store.state.coilId=e.id,this.$store.state.selRows=[e],this.$router.push({path:"/slit-planning"})),"preview planning"===t&&(this.$store.state.coilId=e.id,this.$store.state.slitDrawer=!0,console.log("preview")),"edit planning"===t&&(this.$store.state.coilId=e.id,this.$router.push({path:"/slit-planning/".concat(e.id)}))},openSlitForm:function(){this.$store.state.selRows=this.selMultiRows,this.$router.push({path:"/slit-planning"})},setOptions:function(){console.log("Calleddddddd"),1===this.options.page?this.searchData():this.options.page=1},getTextColor:function(t){var e="";switch(t){case"slitted":e="grey--text text--darken-1";break;case"available":e="green--text text--darken-2";break;case"edit-required":e="red--text text--lighten-1";break;default:e="yellow--text text--darken-4";break}return e},openForm:function(){console.log(this.$store.state),this.$store.state.coilId=null,this.$store.state.coilDrawer=!0},clearSearch:function(t){"date"===t?this.addedFrom=null:"status"===t?this.selStatus=null:"company"===t?this.selCompany=null:"thickness"===t?this.selThickness=null:"shift"===t&&(this.selShift=null),this.setOptions()},searchData:function(){var t={},e=this.options,a=e.page,s=e.itemsPerPage;t.sortBy=this.sortBy,t.orderBy=this.orderBy,t.page=a,t.limit=s,this.selCompany&&(t.company=this.selCompany),this.selStatus&&(t.status=this.selStatus.toLowerCase()),this.addedFrom&&(t.date=this.addedFrom),this.selThickness&&(t.thickness=this.selThickness),this.selShift&&(t.slit_shift=this.selShift),this.$store.dispatch("getCoils",t)},deleteCoil:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,o["a"].delete(t);case 3:s=a.sent,e.$store.dispatch("getCoils",{page:1}),console.log("result",s),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),console.log("error",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},editCoil:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,o["a"].update(t.id,t);case 3:s=a.sent,e.$store.dispatch("getCoils",{page:1}),console.log("result",s),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),console.log("error",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()}}},g=v,x=(a("79a5"),Object(h["a"])(g,s,n,!1,null,null,null));e["default"]=x.exports},b0c0:function(t,e,a){var s=a("83ab"),n=a("9bf2").f,i=Function.prototype,o=i.toString,l=/^\s*function ([^ (]*)/,r="name";s&&!(r in i)&&n(i,r,{configurable:!0,get:function(){try{return o.call(this).match(l)[1]}catch(t){return""}}})},c740:function(t,e,a){"use strict";var s=a("23e7"),n=a("b727").findIndex,i=a("44d2"),o=a("ae40"),l="findIndex",r=!0,c=o(l);l in[]&&Array(1)[l]((function(){r=!1})),s({target:"Array",proto:!0,forced:r||!c},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i(l)},c8d2:function(t,e,a){var s=a("d039"),n=a("5899"),i="​᠎";t.exports=function(t){return s((function(){return!!n[t]()||i[t]()!=i||n[t].name!==t}))}},ee43:function(t,e,a){}}]);
//# sourceMappingURL=chunk-0d441fd3.b6a5b3e5.js.map